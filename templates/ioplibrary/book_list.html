{% extends '_base.html' %}
{% load static %}

{% block custom_header %}
<link rel="stylesheet" href="{% static 'ioplibrary/css/book_list.css' %}">
{% endblock custom_header %}

{% block title %} IOP's Library {% endblock title %}

{% block content %}
    <div id="welcome-text">
        <h1><a href="{% url 'book_list' %}">Welcome to IOP's Library</a></h1>
        <br>
        Search for books and check availability for borrowing books from IOP's Library
    </div>
    <div id="search-container">
        <form id="search-form">
            {% csrf_token %}
            <div class="search-input">
                <span class="search-input-icon" id="basic-addon1">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
                    </svg>
                </span>
                <input id="search-bar" type="text" autocomplete="off" autofocus="autofocus" name="iopl-searchbar" 
                placeholder="Start typing to search for books..." size="100" maxlength="100" value="">
            </div>
            <div class="search-filter">
                <b>Search by type: </b>
                <span class="search-choice">
                    <input class="search-option" type="radio" name="book_type" value="All" checked="checked"> All
                </span>
                {% for type in types %}
                <span class="search-choice">
                    <input class="search-option" type="radio" name="book_type" value="{{ type }}"> {{ type }}
                </span>
                {% endfor %}
            </div>
            <div class="search-filter">
                <b>Search in fields: </b>
                <span class="search-choice">
                    <input class="search-option" type="radio" name="field" value="All" checked="checked"> All
                </span>
                {% for field in field_list %}
                <span class="search-choice">
                    <input class="search-option" type="radio" name="field" value="{{ field.field_name }}"> {{ field.field_name }}
                </span>
                {% endfor %}
            </div>
            <div class="search-filter">
                <b>Search in information: </b>
                <span class="search-choice">
                    <input class="search-option" type="radio" name="column" value="All" checked="checked"> All
                </span>
                {% for column in book_columns %}
                <span class="search-choice">
                    <input class="search-option" type="radio" name="column" value="{{ column }}"> {{ column }}
                </span>
                {% endfor %}
            </div>
        </form>
    </div>

    <div id="search-result-notify">
        <p id="search-result-text">Found <b><u>{{ result_number }} books</u></b> in the library</p>
    </div>

    <div id="book-list">
        {% for book in object_list %}
        <div class="book-container">
            <div class="book-cover-container">
                <img class="book-cover" src="/media/{{ book.cover }}" alt="" />
            </div>
            <div class="book-information-container">
                <ul class="book-information-list">
                    <li><b>Title:</b> {{ book.title }}</li>
                    <li><b>Authors:</b> {{ book.authors }}</li>
                    <li><b>Publisher:</b> {{ book.publisher }}</li>
                    <li><b>Type:</b> {{ book.type }}</li>
                    <li><b>Field:</b> {{ book.field }}</li>
                    <li><b>Year:</b> {{ book.year }}</li>
                    <li><b>Edition:</b> {{ book.edition }}</li>
                    <li><b>ISBN:</b> {{ book.isbn }}</li>
                    <li><b>Inventory Number:</b> {{ book.inventory_number }}</li>
                    <li><b>Quantity:</b> {{ book.units }}</li>
                    <li><b>Available:</b> {{ book.get_availability }}</li>
                </ul>
            </div>
        </div>
        {% endfor %}
    </div>
    <button class="back-to-top-btn" onclick="scrollToTop()">
        <i class="bi bi-arrow-up up-arrow-icon" aria-hidden="true"></i>
    </button>
{% endblock content %}

{% block custom_js %}
<script src={% static "ioplibrary/js/book_list.js" %}></script>
{% endblock custom_js %}